<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">  
<html>  
 <head>  
  <title> New Document </title>  
  <script>  
  //xxbh:????,bjbh:????,xx:??  
    var arrJson=[  
        {'xxbh':'1001','bjbh':'0801','xx':'??'},{'xxbh':'1001','bjbh':'0802','xx':'??'},  
        {'xxbh':'1003','bjbh':'0803','xx':'??'},{'xxbh':'1003','bjbh':'0804','xx':'??'},  
        {'xxbh':'1005','bjbh':'0701','xx':'??'},{'xxbh':'1002','bjbh':'0701','xx':'??'},  
        {'xxbh':'1005','bjbh':'0701','xx':'??'},{'xxbh':'1002','bjbh':'0801','xx':'??'},  
        {'xxbh':'1005','bjbh':'0802','xx':'??'},{'xxbh':'1002','bjbh':'0901','xx':'??'},  
        {'xxbh':'1003','bjbh':'0901','xx':'??'},{'xxbh':'1004','bjbh':'0901','xx':'??'},  
        {'xxbh':'1001','bjbh':'0901','xx':'??'},{'xxbh':'1006','bjbh':'0901','xx':'??'},  
        {'xxbh':'1005','bjbh':'0901','xx':'??'},{'xxbh':'1004','bjbh':'0901','xx':'??'},  
        {'xxbh':'1006','bjbh':'0901','xx':'??'},{'xxbh':'1004','bjbh':'0901','xx':'??'},  
        {'xxbh':'1002','bjbh':'0901','xx':'??'},{'xxbh':'1001','bjbh':'0901','xx':'??'}  
    ];  
    function creatMapByXxbh(arrJson){  
        var xxbhMap={};  
        var len = arrJson.length;  
        for(var i=0;i<len;i++){  
          
            if(xxbhMap[arrJson[i].xxbh] == undefined){  
                var list = [];  
                list.push(arrJson[i]);  
                xxbhMap[arrJson[i].xxbh] = list;  
            }else{  
                xxbhMap[arrJson[i].xxbh].push(arrJson[i]);  
            }  
              
        }  
        var str="<table border='1'><tr><td width='200'>????</td><td width='200'>??</td><td width='200'>??</td></tr>";  
        for(var xxbh in xxbhMap){  
            var stu = xxbhMap[xxbh];  
            alert(stu.length);  
            str+="<tr><td rowspan='"+stu.length+"'>"+xxbh+"</td>";  
            for(var i = 0;i < stu.length;i++){  
                //document.write(xxbh + " "+stu[i].bjbh+" "+stu[i].xx +"<br />")  
                //document.write("<table><tr><td>????</td><td>??</td><td>??</td></tr></table> ")  
                if(i==0){  
                    str+="<td>"+stu[i].bjbh+"</td><td>"+stu[i].xx+"</td></tr>";  
                }else{  
                    str+="<tr><td>"+stu[i].bjbh+"</td><td>"+stu[i].xx+"</td></tr>";  
                }     
            }  
            str+="<tr ><td colspan='3'>"+xxbh+"??"+stu.length+"???</td></tr>"  
        }  
        str+="</table> ";  
        document.write(str)  
    }  
  </script>  
 </head >  
  
 <body>  
  <button onclick='creatMapByXxbh(arrJson)'>??</button>   
 </body>  
</html>  